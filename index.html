<!doctype html>
<html lang="de">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Goblin Notes</title>
    <link rel="shortcut icon" href="./assets/images/logo-black.png">
    <link rel="stylesheet" href="./styles.css" />
</head>

<body>
    <div id="bootOverlay" class="boot-overlay" role="status" aria-live="polite">
        <div class="boot-overlay__inner">
            <div class="boot-spinner" aria-hidden="true"></div>
            <p id="bootStatus" class="boot-status">Starte Goblin Notes ‚Ä¶</p>
            <div class="boot-progress" aria-hidden="true">
                <div id="bootProgressBar" class="boot-progress__bar"></div>
            </div>
            <p id="bootHint" class="boot-hint" hidden>Tippe einmal, damit der Kobold hallo sagen darf.</p>
        </div>
    </div>
    <div id="orientationHint" class="orientation-hint" role="status" aria-live="polite">
        <span>F√ºr die beste Ansicht bitte ins Querformat drehen.</span>
    </div>
    <header class="app-header">
        <div class="logo">
            <a href="https://melopoiia.com/" id="logo-link" aria-label="Logo-Link">
                <img src="./assets/images/logo-wheat.png" data-asset-src="assets/images/logo-wheat.png" alt="Goblin Logo" />
            </a>
        </div>
        <h1 class="title">Kobold Ton</h1>
        <button class="menu-btn" aria-label="Men√º √∂ffnen">‚ò∞</button>
    </header>

    <main class="app-main">

        <div class="all-panel-frame">

<div class="panel-frame">

        <!-- Sequenz-Auswahl -->
        <section class="panel tasks" id="sequencePanel">
            <div class="tasks-header">
                <button type="button" class="tasks-trigger" id="tasksTrigger">
                    <span class="panel-label">Tonfolge</span>
                    <h2 class="panel-title" id="panelTitle" data-default="w√§hlen">w√§hlen</h2>
                </button>
                <button type="button" class="tasks-info-btn" id="tasksInfoBtn" aria-haspopup="dialog" aria-controls="tasksInfoPopup" aria-expanded="false">Info</button>
            </div>
            <div class="task-overlay" id="taskOverlay">
                <span class="info">Suche eine Tonfolge, aus der der Kobold einen Ton ver√§ndert oder klaut.</span>
                <div class="accordion">
                    <button type="button" class="accordion-label">Chromatik</button>
                    <div class="option-list">
                        <button class="opt" data-mode="chromatic" data-variant="5-any">5 T√∂ne chrom</button>
                        <button class="opt" data-mode="chromatic" data-variant="12-up">13 T√∂ne chrom ‚Üë</button>
                        <button class="opt" data-mode="chromatic" data-variant="12-down">13 T√∂ne chrom ‚Üì</button>
                        <button class="opt" data-mode="chromatic" data-variant="25-updown">25 T√∂ne chrom</button>
                    </div>
                </div>

                <div class="accordion">
                    <button type="button" class="accordion-label">Tonal</button>
                    <div class="option-list">
                        <button class="opt" data-mode="tonal" data-variant="kids-5">5 T√∂ne tonal</button>
                        <button class="opt" data-mode="tonal" data-variant="kids-7">7 T√∂ne tonal</button>
                        <button class="opt" data-mode="tonal" data-variant="kids-9">9 T√∂ne tonal</button>
                        <button class="opt" data-mode="tonal" data-variant="kids-12">12 T√∂ne tonal</button>
                    </div>
                </div>

                <div class="accordion">
                    <button type="button" class="accordion-label">Atonal</button>
                    <div class="option-list">
                        <button class="opt" data-mode="atonal" data-variant="atonal-5-easy">5 T√∂ne (leicht)</button>
                        <button class="opt" data-mode="atonal" data-variant="atonal-5-hard">5 T√∂ne (schwer)</button>
                        <button class="opt" data-mode="atonal" data-variant="atonal-7-easy">7 T√∂ne (leicht)</button>
                        <button class="opt" data-mode="atonal" data-variant="atonal-7-hard">7 T√∂ne (schwer)</button>
                        <button class="opt" data-mode="atonal" data-variant="atonal-12-easy">12 T√∂ne (leicht)</button>
                        <button class="opt" data-mode="atonal" data-variant="atonal-12-hard">12 T√∂ne (schwer)</button>
                    </div>
                </div>
            </div>
            <div class="tasks-info-popup" id="tasksInfoPopup" role="dialog" aria-modal="false" aria-labelledby="tasksInfoHeading" hidden>
                <div class="tasks-info-inner">
                    <div class="tasks-info-head">
                        <h3 class="tasks-info-title" id="tasksInfoHeading">Spielbeschreibung</h3>
                        <button type="button" class="tasks-info-close" id="tasksInfoClose" aria-label="Infofenster schlie√üen">X</button>
                    </div>
                    <p>W√§hle zun√§chst eine Tonfolge (beginne am besten mit 5 T√∂nen bei Chromatik oder Tonal). Es erklingt eine Tonfolge.</p>
                    <p>Du kannst die Tonfolge jederzeit wieder h√∂ren. Die klingenden T√∂ne leuchten dabei kurz auf, doch das gibt einen Punktabzug. Solange der Kobold noch nicht gespielt hat, kannst du auf der Tastatur auch die T√∂ne nachspielen.</p>
                    <p>Dann lass den Kobold spielen. Dieser l√§sst einen Ton aus oder spielt stattdessen einen anderen Ton. Klicke auf der Tastatur den fehlenden Ton und gewinne die Runde oder starte eine neue Runde.</p>
                </div>
            </div>
        </section>


        <!-- Goblin + Score -->
        <section class="panel status">
            <div class="goblin">
                <img id="goblinImg" src="./assets/images/goblin/hello.png" data-asset-src="assets/images/goblin/hello.png" alt="Goblin Reaktion" />
            </div>
            <div class="score">
                <div class="info no-wrap">Tempo x Tonfolge = Gewinn</div>
                <div>Gesamt-Score: <strong id="totalScore">0</strong></div>
                <div>m√∂glicher Gewinn: <strong id="potentialScore">0</strong></div>                
            </div>
        </section>
     </div>
        <!-- Tempo + Steuerung -->
        <section class="panel controls">
            <div class="tempo">
                <label for="tempoRange">Tempo (BPM)</label>
                <input id="tempoRange" type="range" min="60" max="400" value="120" />
                <output id="tempoOut">120</output>
            </div>

            <div class="play-controls">
                <button id="playCorrect" class="primary">Nochmal h√∂ren - mit Punktabzug</button>
                <button id="playGoblin" class="accent">üëπ Kobold spielt!</button>
                <button id="resetRound" class="ghost">‚Ü∫ Neue Runde</button>
            </div>
        </section>
   
        </div>

        <!-- Klaviertastatur -->
        <section class="panel keyboard-panel">
            <h2 class="panel-title">Klaviertastatur</h2>
            <div id="keyboard" class="keyboard" aria-label="Klaviertastatur (C2‚ÄìC5)"></div>
        </section>
    </main>

    <footer class="app-footer">
        <small>¬©Ô∏è Melopoiia - v0.1 ‚Äì Entwurf</small>
    </footer>

    <script type="module" src="./js/main.js"></script>
</body>

</html>
